# ПЛАН_ВНЕДРЕНИЯ: Запуск «Контура Допуска» (Foundation Admission Gate)

## Цель
Загрузить фундаментальные блоки (`BLOCK_01` – `BLOCK_05`) как **Контур Допуска (Admission Gate)**. Это НЕ обучение, а жесткое условие входа в систему. Прохождение этих блоков ведет к получению статуса `ACCEPTED` в модели `FoundationAcceptance`.

## 1. Семантический сдвиг (Методология)
- **НЕ Академия:** Это `Foundation Zone` (Зона Фундамента).
- **НЕ Курс:** Это `Admission Container` (Контейнер Допуска — v2.2).
- **НЕ Модули:** Это `Admission Blocks` (Блоки Допуска).
- **Результат:** Вместо `course.completed` система должна зафиксировать `FoundationAcceptance.decision = ACCEPTED`.

## 2. Маппинг данных (DB Strategy)
Несмотря на использование таблиц Университета для хранения текста (для экономии кода), семантически флаги будут иными:
- **Course (Контейнер):**
    - `type: FOUNDATIONAL` (флаг для фронта: «это Гейт, а не курс»).
    - `is_mandatory: true`.
    - `expected_effect: "Юридический и операционный допуск"`.
- **Material (Блоки):**
    - 5 блоков на базе `BLOCK_01` – `BLOCK_05`.
    - Каждый блок содержит **Маркер Принятия (Acceptance Marker)** — формулировку, которую пользователь обязан «подписать» (подтвердить).

## 3. Скрипт сидирования (`backend/scripts/seed-foundation-gate.ts`) [NEW]
Специализированный скрипт:
1. Вычитывает markdown-файлы.
2. Создает/обновляет `Course` с типом `FOUNDATIONAL` как системный объект.
3. Создает 5 `Material` (текстовых блоков).
4. **Важно:** В метаданные материалов записывает флаг `is_admission_block: true`.
5. Генерирует или обновляет системную запись в `FoundationAuditLog` о создании текущей версии контура (v2.2).

## 4. Логика допуска (Logic Flow)
1. Пользователь заходит в систему.
2. Система проверяет `FoundationAcceptance`. Если записи нет или она `NOT_ACCEPTED` — включается режим **Lockout**.
3. Пользователю доступен ТРИУМВИРАТ принятия (Только 5 блоков гейта).
4. После подтверждения последнего блока (BLOCK_05):
    - Скрипт/API создает запись `FoundationAcceptance { decision: ACCEPTED, version: "v2.2" }`.
    - Только после этого открывается Side Menu и доступ к другим Академиям.

## 5. Шаги выполнения
1. Создать сид-скрипт `backend/scripts/seed-foundation-gate.ts`.
2. Добавить команду в [package.json](file:///f:/Matrix_Gin/backend/package.json): `"seed:foundation": "ts-node scripts/seed-foundation-gate.ts"`.
3. Запустить загрузку гейта.

## 6. Верификация
- В БД должен появиться один `Course` с `type: FOUNDATIONAL`.
- В таблице `Material` должно быть 5 записей с текстами конституции и кодекса.
- Проверить наличие `Acceptance Marker` в конце каждого текстового блока.
