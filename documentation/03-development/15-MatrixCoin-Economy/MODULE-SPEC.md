# –ú–æ–¥—É–ª—å: MatrixCoin Economy (–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —ç–∫–æ–Ω–æ–º–∏–∫–∞)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ù–´–ô (MVP Phase 1)  
**–°—Ä–æ–∫:** –ù–µ–¥–µ–ª–∏ 5-6  
**–ö–æ–º–∞–Ω–¥–∞:** 1 Backend + 1 Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫

---

## üìã –û–ü–ò–°–ê–ù–ò–ï

–°–∏—Å—Ç–µ–º–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —ç–∫–æ–Ω–æ–º–∏–∫–∏ —Å –¥–≤–æ–π–Ω–æ–π –≤–∞–ª—é—Ç–æ–π (MC + GMC), —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏, –º–∞–≥–∞–∑–∏–Ω–æ–º –∏ –∞—É–∫—Ü–∏–æ–Ω–∞–º–∏. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

‚úÖ **Dual Currency System:**
- **MC (MatrixCoin)** - —Å–≥–æ—Ä–∞–µ–º—ã–µ, –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ (TTL: 90 –¥–Ω–µ–π)
- **GMC (Golden MatrixCoin)** - –≤–µ—á–Ω—ã–µ, —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è MC ‚Üí GMC —á–µ—Ä–µ–∑ –∞—É–∫—Ü–∏–æ–Ω

‚úÖ **Wallet Management:**
- –ë–∞–ª–∞–Ω—Å—ã MC –∏ GMC
- –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- "–°–µ–π—Ñ" - –∑–∞–º–æ—Ä–æ–∑–∫–∞ MC –Ω–∞ 30 –¥–Ω–µ–π (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–≥–æ—Ä–∞–Ω–∏—è)

‚úÖ **Transactions:**
- –ü–µ—Ä–µ–≤–æ–¥ MC/GMC –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ –∑–∞–¥–∞—á–∏, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- –°–ø–∏—Å–∞–Ω–∏–µ –∑–∞ –ø–æ–∫—É–ø–∫–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ

‚úÖ **Store:**
- –¢–æ–≤–∞—Ä—ã –∏ —É—Å–ª—É–≥–∏ –∑–∞ MC/GMC
- –°–∫–∏–¥–∫–∏ –ø–æ —Ä–∞–Ω–≥—É (–ò–Ω–≤–µ—Å—Ç–æ—Ä, –ú–∞–≥–Ω–∞—Ç)
- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏ –ª–∏–º–∏—Ç—ã

‚úÖ **Auction System:**
- Real-time —Ç–æ—Ä–≥–∏ (WebSocket)
- –ü—Ä–∞–≤–∏–ª–æ "–ê–Ω—Ç–∏—Å–Ω–∞–π–ø–µ—Ä" (–ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞–≤–∫–µ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω)
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è MC ‚Üí GMC

‚úÖ **Payment Integration:**
- –°–±–µ—Ä–ë–∞–Ω–∫ API
- –¢–∏–Ω—å–∫–æ—Ñ—Ñ API
- –Æ–ö–∞—Å—Å–∞
- –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —Ä—É–±–ª—è–º–∏

---

## üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–•

### –¢–∞–±–ª–∏—Ü—ã

```sql
-- –ö–æ—à–µ–ª—å–∫–∏
CREATE TABLE wallets (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) UNIQUE,
    mc_balance INTEGER DEFAULT 0,
    gmc_balance INTEGER DEFAULT 0,
    mc_frozen INTEGER DEFAULT 0, -- –≤ —Å–µ–π—Ñ–µ
    safe_until TIMESTAMPTZ, -- –¥–æ –∫–∞–∫–æ–π –¥–∞—Ç—ã –∑–∞–º–æ—Ä–æ–∂–µ–Ω–æ
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
CREATE TABLE transactions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    from_user_id UUID REFERENCES users(id),
    to_user_id UUID REFERENCES users(id),
    
    amount INTEGER NOT NULL,
    currency VARCHAR(10) NOT NULL, -- MC, GMC, RUB
    type VARCHAR(50) NOT NULL, -- reward, transfer, purchase, payment
    
    -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    description TEXT,
    reference_type VARCHAR(50), -- task, achievement, store_item
    reference_id UUID,
    
    status VARCHAR(50) DEFAULT 'completed', -- pending, completed, failed
    
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ú–∞–≥–∞–∑–∏–Ω
CREATE TABLE store_items (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) NOT NULL,
    description TEXT,
    image_url TEXT,
    
    -- –¶–µ–Ω–∞
    price_mc INTEGER,
    price_gmc INTEGER,
    price_rub DECIMAL(10,2),
    
    -- –°–∫–∏–¥–∫–∏ –ø–æ —Ä–∞–Ω–≥—É
    discount_investor INTEGER DEFAULT 0, -- % —Å–∫–∏–¥–∫–∞
    discount_magnate INTEGER DEFAULT 0,
    
    -- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
    stock INTEGER DEFAULT -1, -- -1 = unlimited
    max_per_user INTEGER DEFAULT -1,
    
    category VARCHAR(100),
    is_active BOOLEAN DEFAULT true,
    
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ü–æ–∫—É–ø–∫–∏
CREATE TABLE purchases (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    item_id UUID REFERENCES store_items(id),
    
    quantity INTEGER DEFAULT 1,
    price_paid INTEGER,
    currency_paid VARCHAR(10),
    
    status VARCHAR(50) DEFAULT 'completed', -- pending, completed, cancelled
    
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ê—É–∫—Ü–∏–æ–Ω—ã
CREATE TABLE auctions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title VARCHAR(255) NOT NULL,
    description TEXT,
    
    starting_bid_mc INTEGER NOT NULL,
    current_bid_mc INTEGER,
    current_winner_id UUID REFERENCES users(id),
    
    gmc_reward INTEGER NOT NULL, -- —Å–∫–æ–ª—å–∫–æ GMC –ø–æ–ª—É—á–∏—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—å
    
    start_time TIMESTAMPTZ NOT NULL,
    end_time TIMESTAMPTZ NOT NULL,
    
    status VARCHAR(50) DEFAULT 'upcoming', -- upcoming, active, ended
    
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –°—Ç–∞–≤–∫–∏ –Ω–∞ –∞—É–∫—Ü–∏–æ–Ω–µ
CREATE TABLE auction_bids (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    auction_id UUID REFERENCES auctions(id) ON DELETE CASCADE,
    user_id UUID REFERENCES users(id),
    
    bid_amount_mc INTEGER NOT NULL,
    
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- MC Lifecycle (–¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–≥–æ—Ä–∞–Ω–∏—è)
CREATE TABLE mc_lifecycle (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    
    amount INTEGER NOT NULL,
    earned_at TIMESTAMPTZ NOT NULL,
    expires_at TIMESTAMPTZ NOT NULL, -- +90 –¥–Ω–µ–π –æ—Ç earned_at
    
    is_frozen BOOLEAN DEFAULT false,
    is_expired BOOLEAN DEFAULT false,
    
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_wallets_user ON wallets(user_id);
CREATE INDEX idx_transactions_from ON transactions(from_user_id);
CREATE INDEX idx_transactions_to ON transactions(to_user_id);
CREATE INDEX idx_transactions_type ON transactions(type);
CREATE INDEX idx_store_items_active ON store_items(is_active);
CREATE INDEX idx_purchases_user ON purchases(user_id);
CREATE INDEX idx_auctions_status ON auctions(status);
CREATE INDEX idx_auction_bids_auction ON auction_bids(auction_id);
CREATE INDEX idx_mc_lifecycle_user ON mc_lifecycle(user_id);
CREATE INDEX idx_mc_lifecycle_expires ON mc_lifecycle(expires_at) WHERE is_expired = false;
```

---

## üîå API ENDPOINTS

### Wallet Endpoints

#### GET `/api/economy/balance/{userId}`
–ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞

**Response (200):**
```json
{
  "success": true,
  "data": {
    "userId": "user-uuid-1",
    "mc": {
      "total": 1250,
      "available": 1150,
      "frozen": 100,
      "safeUntil": "2025-12-22T10:00:00Z"
    },
    "gmc": {
      "total": 50
    },
    "statistics": {
      "totalEarned": 2450,
      "totalSpent": 1200,
      "expiringIn7Days": 150
    }
  }
}
```

#### POST `/api/economy/safe/activate`
–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å "–°–µ–π—Ñ" (–∑–∞–º–æ—Ä–æ–∑–∫–∞ MC –Ω–∞ 30 –¥–Ω–µ–π)

**Request:**
```json
{
  "amount": 500
}
```

**Response (200):**
```json
{
  "success": true,
  "data": {
    "frozen": 500,
    "safeUntil": "2025-12-22T10:00:00Z",
    "fee": 25
  }
}
```

#### GET `/api/economy/safe/status/{userId}`
–°—Ç–∞—Ç—É—Å —Å–µ–π—Ñ–∞

---

### Transaction Endpoints

#### GET `/api/economy/transactions`
–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**Query:**
```
?userId=uuid-123
&type=reward,transfer
&currency=MC
&page=1
&limit=20
```

**Response (200):**
```json
{
  "success": true,
  "data": [
    {
      "id": "tx-1",
      "from": { "id": "system", "name": "System" },
      "to": { "id": "user-1", "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" },
      "amount": 100,
      "currency": "MC",
      "type": "reward",
      "description": "–ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏",
      "createdAt": "2025-11-22T10:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 156
  }
}
```

#### POST `/api/economy/transactions`
–°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é (–ø–µ—Ä–µ–≤–æ–¥)

**Request:**
```json
{
  "toUserId": "user-uuid-2",
  "amount": 50,
  "currency": "MC",
  "description": "–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–º–æ—â—å"
}
```

---

### Store Endpoints

#### GET `/api/economy/store`
–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –º–∞–≥–∞–∑–∏–Ω–µ

**Response (200):**
```json
{
  "success": true,
  "data": [
    {
      "id": "item-1",
      "name": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–µ–Ω—å –æ—Ç–ø—É—Å–∫–∞",
      "description": "1 –¥–µ–Ω—å –æ–ø–ª–∞—á–∏–≤–∞–µ–º–æ–≥–æ –æ—Ç–ø—É—Å–∫–∞",
      "imageUrl": "https://storage.../vacation.jpg",
      "price": {
        "mc": 500,
        "gmc": null,
        "rub": 3000
      },
      "discount": {
        "investor": 10,
        "magnate": 20
      },
      "stock": -1,
      "category": "benefits"
    }
  ]
}
```

#### GET `/api/economy/store/{itemId}`
–î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞

#### POST `/api/economy/store/{itemId}/buy`
–ö—É–ø–∏—Ç—å —Ç–æ–≤–∞—Ä

**Request:**
```json
{
  "quantity": 1,
  "currency": "MC"
}
```

**Response (200):**
```json
{
  "success": true,
  "data": {
    "purchaseId": "purchase-1",
    "itemName": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–µ–Ω—å –æ—Ç–ø—É—Å–∫–∞",
    "pricePaid": 450,
    "currencyPaid": "MC",
    "discount": 10,
    "newBalance": {
      "mc": 700
    }
  }
}
```

---

### Auction Endpoints

#### GET `/api/economy/auction`
–°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞—É–∫—Ü–∏–æ–Ω–æ–≤

**Response (200):**
```json
{
  "success": true,
  "data": [
    {
      "id": "auction-1",
      "title": "–ê—É–∫—Ü–∏–æ–Ω –∑–∞ 100 GMC",
      "description": "–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è MC –≤ GMC",
      "startingBid": 5000,
      "currentBid": 7500,
      "currentWinner": {
        "id": "user-1",
        "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
      },
      "gmcReward": 100,
      "startTime": "2025-11-22T10:00:00Z",
      "endTime": "2025-11-22T18:00:00Z",
      "status": "active",
      "timeRemaining": 14400
    }
  ]
}
```

#### GET `/api/economy/auction/{id}`
–î–µ—Ç–∞–ª–∏ –∞—É–∫—Ü–∏–æ–Ω–∞

#### POST `/api/economy/auction/{id}/bid`
–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É

**Request:**
```json
{
  "bidAmount": 8000
}
```

**Response (200):**
```json
{
  "success": true,
  "data": {
    "currentBid": 8000,
    "yourBid": true,
    "endTimeExtended": true,
    "newEndTime": "2025-11-22T18:10:00Z"
  }
}
```

#### GET `/api/economy/auction/{id}/history`
–ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫

---

### Payment Endpoints

#### POST `/api/economy/payment/sberbank`
–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –°–±–µ—Ä–ë–∞–Ω–∫

**Request:**
```json
{
  "amount": 1000,
  "currency": "RUB",
  "description": "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ MC –±–∞–ª–∞–Ω—Å–∞"
}
```

**Response (200):**
```json
{
  "success": true,
  "data": {
    "paymentId": "pay-1",
    "paymentUrl": "https://securepayments.sberbank.ru/...",
    "amount": 1000,
    "currency": "RUB"
  }
}
```

#### POST `/api/economy/payment/tinkoff`
–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –¢–∏–Ω—å–∫–æ—Ñ—Ñ

#### POST `/api/economy/payment/yookassa`
–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å–∞

#### GET `/api/economy/payment/{transactionId}`
–°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞

---

## üõ†Ô∏è –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö

### Backend
- **Nest.js** ‚úÖ
- **Prisma ORM** ‚úÖ
- **BullMQ** - –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è MC expiration
- **Socket.io** - real-time auction updates
- **Payment SDKs:**
  - @a2seven/yoo-checkout (–Æ–ö–∞—Å—Å–∞)
  - node-sberbank-acquiring (–°–±–µ—Ä–ë–∞–Ω–∫)
  - tinkoff-payment-sdk (–¢–∏–Ω—å–∫–æ—Ñ—Ñ)

### Frontend
- **React 18** ‚úÖ
- **Redux Toolkit** ‚úÖ
- **Socket.io Client** - real-time auction
- **Chart.js** - –±–∞–ª–∞–Ω—Å –≥—Ä–∞—Ñ–∏–∫–∏

---

## üí∞ –õ–û–ì–ò–ö–ê MC LIFECYCLE

### –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ MC
```typescript
// –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏
await walletService.earnMC(userId, amount, {
  type: 'reward',
  referenceType: 'task',
  referenceId: taskId
});

// –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ mc_lifecycle
{
  userId,
  amount,
  earnedAt: NOW(),
  expiresAt: NOW() + 90 days,
  isFrozen: false,
  isExpired: false
}
```

### –°–≥–æ—Ä–∞–Ω–∏–µ MC (Cron Job)
```typescript
// –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 00:00
@Cron('0 0 * * *')
async checkExpiredMC() {
  const expired = await prisma.mcLifecycle.findMany({
    where: {
      expiresAt: { lte: new Date() },
      isExpired: false,
      isFrozen: false
    }
  });
  
  for (const record of expired) {
    // –°–ø–∏—Å–∞—Ç—å MC —Å –±–∞–ª–∞–Ω—Å–∞
    await walletService.deductMC(record.userId, record.amount);
    
    // –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ expired
    await prisma.mcLifecycle.update({
      where: { id: record.id },
      data: { isExpired: true }
    });
    
    // –£–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    await notificationService.send(record.userId, {
      type: 'mc_expired',
      amount: record.amount
    });
  }
}
```

### –õ–æ–≥–∏–∫–∞ "–°–µ–π—Ñ–∞"
```typescript
async activateSafe(userId: string, amount: number) {
  const fee = Math.floor(amount * 0.05); // 5% –∫–æ–º–∏—Å—Å–∏—è
  const totalToFreeze = amount + fee;
  
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å
  const wallet = await getWallet(userId);
  if (wallet.mc_balance < totalToFreeze) {
    throw new Error('Insufficient balance');
  }
  
  // –ó–∞–º–æ—Ä–æ–∑–∏—Ç—å MC
  await prisma.wallet.update({
    where: { user_id: userId },
    data: {
      mc_balance: { decrement: totalToFreeze },
      mc_frozen: { increment: amount },
      safe_until: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000)
    }
  });
  
  // –ó–∞–º–æ—Ä–æ–∑–∏—Ç—å –≤ mc_lifecycle
  await prisma.mcLifecycle.updateMany({
    where: {
      user_id: userId,
      is_expired: false,
      is_frozen: false
    },
    data: { is_frozen: true }
  });
}
```

---

## üéØ AUCTION LOGIC

### Anti-Sniper Rule
```typescript
async placeBid(auctionId: string, userId: string, bidAmount: number) {
  const auction = await getAuction(auctionId);
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è
  if (bidAmount <= auction.currentBid) {
    throw new Error('Bid must be higher than current bid');
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å
  const wallet = await getWallet(userId);
  if (wallet.mc_balance < bidAmount) {
    throw new Error('Insufficient balance');
  }
  
  // –í–µ—Ä–Ω—É—Ç—å MC –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –ª–∏–¥–µ—Ä—É
  if (auction.currentWinnerId) {
    await walletService.addMC(auction.currentWinnerId, auction.currentBid);
  }
  
  // –°–ø–∏—Å–∞—Ç—å MC —É –Ω–æ–≤–æ–≥–æ –ª–∏–¥–µ—Ä–∞
  await walletService.deductMC(userId, bidAmount);
  
  // –û–±–Ω–æ–≤–∏—Ç—å –∞—É–∫—Ü–∏–æ–Ω
  await prisma.auction.update({
    where: { id: auctionId },
    data: {
      current_bid_mc: bidAmount,
      current_winner_id: userId
    }
  });
  
  // Anti-Sniper: –µ—Å–ª–∏ —Å—Ç–∞–≤–∫–∞ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç, –ø—Ä–æ–¥–ª–∏—Ç—å –Ω–∞ 10 –º–∏–Ω
  const timeRemaining = auction.endTime.getTime() - Date.now();
  if (timeRemaining < 5 * 60 * 1000) {
    const newEndTime = new Date(auction.endTime.getTime() + 10 * 60 * 1000);
    await prisma.auction.update({
      where: { id: auctionId },
      data: { end_time: newEndTime }
    });
  }
  
  // Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WebSocket
  io.to(`auction:${auctionId}`).emit('new_bid', {
    bidAmount,
    bidder: userId,
    newEndTime: auction.endTime
  });
}
```

---

## üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

- [ ] MC —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] GMC –±–∞–ª–∞–Ω—Å—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- [ ] –°–≥–æ—Ä–∞–Ω–∏–µ MC –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- [ ] –°–µ–π—Ñ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ê—É–∫—Ü–∏–æ–Ω—ã real-time –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- [ ] –ü–ª–∞—Ç–µ–∂–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ >80%

---

## üìù –ó–ê–í–ò–°–ò–ú–û–°–¢–ò

### –û—Ç –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π
- `02-Authentication-Authorization` - user accounts
- `20-Task-Management` - –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ MC –∑–∞ –∑–∞–¥–∞—á–∏
- `01-Advanced-Gamification` - –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥—É–ª—è–º–∏
- `01-Advanced-Gamification` - —Ä–∞–Ω–≥–∏ –ø–æ GMC
- `03-Branch-Feedback-System` - –Ω–∞–≥—Ä–∞–¥—ã MC
- `11-Kaizen-Continuous-Improvement` - –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ —É–ª—É—á—à–µ–Ω–∏—è
