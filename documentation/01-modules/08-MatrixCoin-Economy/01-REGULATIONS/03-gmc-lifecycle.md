# 03-gmc-lifecycle.md
## GMC Lifecycle — Domain Rulebook

---

## 0. Назначение документа

Документ описывает **жизненный цикл Golden Matrix Coin (GMC)**:
- как GMC появляется (признаётся);
- в каких состояниях существует;
- что с ним можно и нельзя делать;
- как он связан с аукционами и MC.

Документ:
- предназначен для эксплуатации и поддержки;
- фиксирует операционные правила;
- **не является CANON** и может дополняться;
- не вводит экономических или оценочных трактовок.

---

## 1. Что такое GMC в операционном смысле

GMC — это **стратегическая сущность участия**, признанная системой по результату событий.

GMC:
- **не начисляется** как MC;
- **не создаётся автоматически**;
- **признаётся** при выполнении условий.

В системе GMC — это:
- факт признания участия;
- долгоживущая сущность;
- объект с ограниченными действиями.

---

## 2. Принцип признания GMC

### 2.1. GMC не «начисляется»

Ключевое различие:
- MC — начисляется событием;
- GMC — **признаётся** результатом.

Признание GMC:
- всегда опирается на завершённое событие;
- не является наградой;
- не является вознаграждением.

---

### 2.2. Основания признания

GMC может быть признан:
- по результату аукциона;
- при выполнении зафиксированных условий;
- при наличии валидного audit-контекста.

GMC **не признаётся**, если:
- событие не завершено;
- условия выполнены частично;
- есть конфликт audit-данных.

---

## 3. Состояния GMC

GMC существует в следующих состояниях:

1. **Recognized** — признан системой  
2. **Locked** — заблокирован условиями  
3. **Active** — активен (доступен в системе)  
4. **Archived** — исторический (неактивен)

Состояния:
- меняются только событиями;
- не редактируются вручную;
- не перескакивают через этапы.

---

## 4. Признание GMC (Recognition)

### 4.1. Процесс признания

1. Завершается оснóвное событие (например, аукцион)
2. Проверяются условия признания
3. Фиксируется событие `GMCRecognized`
4. GMC появляется в состоянии **Recognized**

---

### 4.2. Что фиксируется в audit

При признании GMC фиксируется:
- источник (аукцион / событие);
- условия признания;
- связь с пользователем;
- временная метка.

---

## 5. Блокировка GMC (Lock)

### 5.1. Назначение блокировки

Блокировка используется для:
- предотвращения преждевременных действий;
- фиксации условий удержания;
- защиты от манипуляций.

---

### 5.2. Процесс блокировки

1. GMC признан
2. Применяются условия блокировки (если есть)
3. Фиксируется событие `GMCLocked`
4. GMC переходит в состояние **Locked**

Если условий блокировки нет:
- GMC может перейти сразу в **Active**.

---

## 6. Активация GMC (Activation)

### 6.1. Условия активации

GMC становится **Active**, если:
- истекли условия блокировки;
- выполнены дополнительные требования;
- нет конфликтов статуса системы.

---

### 6.2. Процесс активации

1. Проверяются условия
2. Фиксируется событие `GMCActivated`
3. GMC доступен как активная сущность

---

## 7. Архивация GMC (Archive)

### 7.1. Основания архивации

GMC архивируется:
- при завершении своего жизненного цикла;
- при закрытии контекста;
- по правилам домена.

---

### 7.2. Процесс архивации

1. Выполняется условие архивации
2. Фиксируется событие `GMCArchived`
3. GMC переходит в состояние **Archived**

Archived GMC:
- не используется;
- остаётся в audit навсегда.

---

## 8. Ограничения и запреты

Запрещено:
- признавать GMC без события;
- пересчитывать GMC задним числом;
- аннулировать GMC без основания;
- конвертировать GMC в MC или деньги;
- передавать GMC между пользователями без правила.

---

## 9. Связь GMC с MC и аукционами

- GMC **не является** суммой MC;
- MC используются для участия;
- GMC признаётся по результату;
- связь всегда прослеживается через audit.

---

## 10. Ошибки и edge-cases

### Конфликт событий
- GMC не признаётся;
- система переходит в ручной режим;
- требуется разбор человеком.

### Прерывание процесса
- незавершённый GMC не считается признанным;
- временные состояния откатываются.

---

## 11. Примеры сценариев

### Стандартный сценарий
1. Аукцион завершён
2. Победитель определён
3. GMC признан
4. GMC заблокирован (если требуется)
5. GMC активирован

### Ошибочный сценарий
1. Аукцион завершён
2. Обнаружен конфликт данных
3. GMC не признан
4. Система ждёт ручного решения

---

## 12. Краткое резюме

- GMC признаётся, а не начисляется.
- Всегда есть основание и событие.
- Состояния линейны и аудируемы.
- Никакой автоматической «награды».
