openapi: 3.1.0
info:
  title: MatrixGin v2.0 API
  version: 2.0.0
  description: |
    **MatrixGin v2.0** ‚Äî –ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è REST API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ–º.
    
    ## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
    - üîê JWT Authentication + RBAC
    - üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ –∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞–º–∏
    - ‚úÖ Smart Task Management —Å NLP
    - üìä KPI & Analytics
    - üí∞ MatrixCoin Economy (MC + GMC)
    - ‚öñÔ∏è Legal & Compliance (152-–§–ó, –¢–ö –†–§)
    - üéÆ Gamification (–°—Ç–∞—Ç—É—Å—ã –∏ –†–∞–Ω–≥–∏)
    - üòä Emotional Analytics
    - ü§ñ AI-powered –º–æ–¥—É–ª–∏
    
    ## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
    - **Backend:** NestJS + PostgreSQL 16
    - **AI:** GigaChat Pro, YandexGPT 3, Qwen 2.5
    - **Cache:** Redis 7
    - **Vector DB:** ChromaDB
    
  contact:
    name: Photomatrix Development Team
    email: dev@photomatrix.ru
  license:
    name: Proprietary
    
servers:
  - url: https://api.matrixgin.photomatrix.ru/v1
    description: Production
  - url: https://staging-api.matrixgin.photomatrix.ru/v1
    description: Staging
  - url: http://localhost:3000/v1
    description: Local Development

tags:
  - name: Authentication
    description: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
  - name: Employees
    description: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏
  - name: Tasks
    description: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏ (Smart Task Management)
  - name: Departments
    description: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞–º–∏
  - name: Economy
    description: MatrixCoin Economy (MC + GMC + Auctions)
  - name: Gamification
    description: –°—Ç–∞—Ç—É—Å—ã, —Ä–∞–Ω–≥–∏, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
  - name: Legal
    description: –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –∫–æ–º–ø–ª–∞–µ–Ω—Å
  - name: Compliance
    description: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –†–§
  - name: Strategy
    description: –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ OKR
  - name: Feedback
    description: –°–∏—Å—Ç–µ–º–∞ —Ñ–∏–¥–±—ç–∫–æ–≤ —Ñ–∏–ª–∏–∞–ª–æ–≤
  - name: Education
    description: –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç
  - name: Emotional
    description: –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
  - name: Learning
    description: –°–∞–º–æ–æ–±—É—á–∞—é—â–∞—è—Å—è —Å–∏—Å—Ç–µ–º–∞ (MatrixGin College)
  - name: Executive
    description: Executive Dashboard
  - name: HR Analytics
    description: HR –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (Matrix360)
  - name: Ethics
    description: Ethics Manager
  - name: Knowledge
    description: –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∏ RAG
  - name: Content
    description: Content Factory
  - name: Kaizen
    description: –°–∏—Å—Ç–µ–º–∞ —É–ª—É—á—à–µ–Ω–∏–π
  - name: Cabinet
    description: –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
  - name: Social
    description: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Ü—Å–µ—Ç–µ–π

security:
  - BearerAuth: []

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT —Ç–æ–∫–µ–Ω –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

  schemas:
    # Common Types
    UUID:
      type: string
      format: uuid
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      example: '550e8400-e29b-41d4-a716-446655440000'
      
    ISODateTime:
      type: string
      format: date-time
      example: '2025-11-21T15:30:00Z'
      
    ISODate:
      type: string
      format: date
      pattern: '^\d{4}-\d{2}-\d{2}$'
      example: '2025-11-21'
      
    Email:
      type: string
      format: email
      pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
      minLength: 5
      maxLength: 255
      example: 'ivan@photomatrix.ru'
      
    # API Response Wrapper
    ApiResponse:
      type: object
      required:
        - success
        - data
      properties:
        success:
          type: boolean
          description: –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏
        data:
          type: object
          description: –î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞
        meta:
          $ref: '#/components/schemas/MetaInfo'
          
    ApiError:
      type: object
      required:
        - success
        - error
      properties:
        success:
          type: boolean
          enum: [false]
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: string
              enum:
                - VALIDATION_ERROR
                - UNAUTHORIZED
                - FORBIDDEN
                - NOT_FOUND
                - CONFLICT
                - INTERNAL_ERROR
                - BAD_REQUEST
                - TOKEN_EXPIRED
                - INSUFFICIENT_PERMISSIONS
            message:
              type: string
              description: –û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
            details:
              type: object
              description: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏
              
    MetaInfo:
      type: object
      properties:
        timestamp:
          $ref: '#/components/schemas/ISODateTime'
        requestId:
          type: string
          format: uuid
        version:
          type: string
          example: '2.0.0'
          
    PaginationParams:
      type: object
      properties:
        page:
          type: integer
          minimum: 1
          default: 1
          description: –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        limit:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          description: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        sortBy:
          type: string
          description: –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
        sortOrder:
          type: string
          enum: [asc, desc]
          default: asc
          
    PaginatedResponse:
      type: object
      required:
        - items
        - pagination
      properties:
        items:
          type: array
          items: {}
        pagination:
          type: object
          required:
            - page
            - limit
            - total
            - totalPages
          properties:
            page:
              type: integer
            limit:
              type: integer
            total:
              type: integer
              description: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            totalPages:
              type: integer
              description: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü
              
    # Enums
    UserRole:
      type: string
      enum:
        - admin
        - hr_manager
        - department_head
        - branch_manager
        - employee
      description: |
        –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
        - `admin` - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã
        - `hr_manager` - HR –º–µ–Ω–µ–¥–∂–µ—Ä
        - `department_head` - –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
        - `branch_manager` - –£–ø—Ä–∞–≤–ª—è—é—â–∏–π —Ñ–∏–ª–∏–∞–ª–æ–º
        - `employee` - –°–æ—Ç—Ä—É–¥–Ω–∏–∫
        
    UserStatus:
      type: string
      enum:
        - active
        - inactive
        - suspended
      description: –°—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      
    EmployeeStatus:
      type: string
      enum:
        - UNIVERSE
        - –ó–≤–µ–∑–¥–∞
        - –ö—Ä–µ–º–µ–Ω—å/–£–≥–ª–µ—Ä–æ–¥
        - –¢–æ–ø—á–∏–∫
        - –§–æ—Ç–æ–Ω
      description: |
        –ü–µ—Ä–≤–∏—á–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–∏–µ—Ä–∞—Ä—Ö–∏—è):
        - `UNIVERSE` - –í—ã—Å—à–∏–π —Å—Ç–∞—Ç—É—Å (–æ—Å–Ω–æ–≤–∞—Ç–µ–ª–∏)
        - `–ó–≤–µ–∑–¥–∞` - –¢–æ–ø-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
        - `–ö—Ä–µ–º–µ–Ω—å/–£–≥–ª–µ—Ä–æ–¥` - –û–ø—ã—Ç–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (1+ –≥–æ–¥)
        - `–¢–æ–ø—á–∏–∫` - –ü—Ä–æ—à–µ–¥—à–∏–µ –∏—Å–ø—ã—Ç–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ä–æ–∫
        - `–§–æ—Ç–æ–Ω` - –ù–æ–≤–∏—á–∫–∏
        
    EmployeeRank:
      type: string
      enum:
        - –ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä
        - –ò–Ω–≤–µ—Å—Ç–æ—Ä
        - –ú–∞–≥–Ω–∞—Ç
      description: |
        –í—Ç–æ—Ä–∏—á–Ω—ã–µ —Ä–∞–Ω–≥–∏ (–Ω–∞ –æ—Å–Ω–æ–≤–µ GMC):
        - `–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä` - 1-9 GMC
        - `–ò–Ω–≤–µ—Å—Ç–æ—Ä` - 10-99 GMC
        - `–ú–∞–≥–Ω–∞—Ç` - 100+ GMC
        
    TaskStatus:
      type: string
      enum:
        - pending
        - in_progress
        - completed
        - cancelled
      description: –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
      
    TaskPriority:
      type: string
      enum:
        - low
        - medium
        - high
        - urgent
      description: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–¥–∞—á–∏
      
    Currency:
      type: string
      enum:
        - MC
        - GMC
        - RUB
      description: |
        –í–∞–ª—é—Ç—ã:
        - `MC` - MatrixCoin (—Å–≥–æ—Ä–∞–µ–º—ã–µ)
        - `GMC` - Golden MatrixCoin (–≤–µ—á–Ω—ã–µ)
        - `RUB` - –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å
        
    TransactionType:
      type: string
      enum:
        - earn
        - spend
        - transfer
        - reward
        - penalty
        - auction_bid
        - auction_win
        - store_purchase
        - safe_activation
      description: –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
      
    EmotionalTone:
      type: number
      format: float
      minimum: 0.0
      maximum: 4.0
      description: |
        –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–Ω (0.0-4.0):
        - 0.0-0.5: –ê–ø–∞—Ç–∏—è/–ì–æ—Ä–µ
        - 0.5-1.0: –°—Ç—Ä–∞—Ö/–¢—Ä–µ–≤–æ–≥–∞
        - 1.0-1.5: –°–∫—Ä—ã—Ç–∞—è –≤—Ä–∞–∂–¥–µ–±–Ω–æ—Å—Ç—å
        - 1.5-2.0: –ê–Ω—Ç–∞–≥–æ–Ω–∏–∑–º
        - 2.0-2.5: –°–∫—É–∫–∞
        - 2.5-3.0: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–∑–º
        - 3.0-3.5: –ò–Ω—Ç–µ—Ä–µ—Å
        - 3.5-4.0: –î–µ–π—Å—Ç–≤–∏–µ/–ò–≥—Ä—ã
      example: 2.8
      
    InteractionLevel:
      type: string
      enum:
        - minimal
        - moderate
        - active
        - intensive
      description: |
        –£—Ä–æ–≤–Ω–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è MatrixGin —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º:
        - `minimal` - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π (–æ–ø—ã—Ç–Ω—ã–µ)
        - `moderate` - –£–º–µ—Ä–µ–Ω–Ω—ã–π (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)
        - `active` - –ê–∫—Ç–∏–≤–Ω—ã–π (–Ω–æ–≤–∏—á–∫–∏)
        - `intensive` - –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π (–ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏)
        
    # Authentication Schemas
    RegisterRequest:
      type: object
      required:
        - email
        - password
        - firstName
        - lastName
      properties:
        email:
          $ref: '#/components/schemas/Email'
        password:
          type: string
          format: password
          minLength: 8
          maxLength: 128
          pattern: '^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$'
          description: |
            –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–∞—Ä–æ–ª—é:
            - –ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤
            - –•–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∑–∞–≥–ª–∞–≤–Ω–∞—è –±—É–∫–≤–∞
            - –•–æ—Ç—è –±—ã –æ–¥–Ω–∞ —Å—Ç—Ä–æ—á–Ω–∞—è –±—É–∫–≤–∞
            - –•–æ—Ç—è –±—ã –æ–¥–Ω–∞ —Ü–∏—Ñ—Ä–∞
            - –•–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª (@$!%*?&)
          example: 'SecurePass123!'
        firstName:
          type: string
          minLength: 2
          maxLength: 50
          example: '–ò–≤–∞–Ω'
        lastName:
          type: string
          minLength: 2
          maxLength: 50
          example: '–ò–≤–∞–Ω–æ–≤'
        middleName:
          type: string
          minLength: 2
          maxLength: 50
          example: '–ò–≤–∞–Ω–æ–≤–∏—á'
        phoneNumber:
          type: string
          pattern: '^\+7\d{10}$'
          example: '+79991234567'
        acceptedNDA:
          type: boolean
          description: –ü—Ä–∏–Ω—è—Ç–∏–µ NDA (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
          example: true
          
    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          $ref: '#/components/schemas/Email'
        password:
          type: string
          format: password
          example: 'SecurePass123!'
          
    RefreshTokenRequest:
      type: object
      required:
        - refreshToken
      properties:
        refreshToken:
          type: string
          description: Refresh token –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ access token
          example: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
          
    AuthResponse:
      type: object
      required:
        - accessToken
        - refreshToken
        - expiresIn
        - user
      properties:
        accessToken:
          type: string
          description: JWT access token
          example: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
        refreshToken:
          type: string
          description: Refresh token
          example: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
        expiresIn:
          type: integer
          description: –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ access token –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
          example: 86400
        user:
          $ref: '#/components/schemas/UserResponse'
          
    UserResponse:
      type: object
      required:
        - id
        - email
        - role
        - status
        - createdAt
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        email:
          $ref: '#/components/schemas/Email'
        role:
          $ref: '#/components/schemas/UserRole'
        status:
          $ref: '#/components/schemas/UserStatus'
        firstName:
          type: string
          example: '–ò–≤–∞–Ω'
        lastName:
          type: string
          example: '–ò–≤–∞–Ω–æ–≤'
        middleName:
          type: string
          example: '–ò–≤–∞–Ω–æ–≤–∏—á'
        phoneNumber:
          type: string
          example: '+79991234567'
        avatar:
          type: string
          format: uri
          example: 'https://cdn.photomatrix.ru/avatars/user-123.jpg'
        departmentId:
          $ref: '#/components/schemas/UUID'
        lastLoginAt:
          $ref: '#/components/schemas/ISODateTime'
        createdAt:
          $ref: '#/components/schemas/ISODateTime'
        updatedAt:
          $ref: '#/components/schemas/ISODateTime'
          
    ForgotPasswordRequest:
      type: object
      required:
        - email
      properties:
        email:
          $ref: '#/components/schemas/Email'
          
    ResetPasswordRequest:
      type: object
      required:
        - token
        - newPassword
      properties:
        token:
          type: string
          description: –¢–æ–∫–µ–Ω —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è –∏–∑ email
        newPassword:
          type: string
          format: password
          minLength: 8
          maxLength: 128
          
    PermissionsResponse:
      type: object
      properties:
        permissions:
          type: array
          items:
            type: string
          example:
            - 'employees.read'
            - 'tasks.create'
            - 'economy.transfer'
            
    # Employee Schemas
    CreateEmployeeRequest:
      type: object
      required:
        - userId
        - departmentId
        - position
        - hireDate
      properties:
        userId:
          $ref: '#/components/schemas/UUID'
        departmentId:
          $ref: '#/components/schemas/UUID'
        position:
          type: string
          minLength: 2
          maxLength: 100
          example: '–§–æ—Ç–æ–≥—Ä–∞—Ñ'
        hireDate:
          $ref: '#/components/schemas/ISODate'
        salary:
          type: number
          format: float
          minimum: 0
          example: 50000
        employeeNumber:
          type: string
          pattern: '^EMP-\d{6}$'
          example: 'EMP-000123'
        status:
          $ref: '#/components/schemas/EmployeeStatus'
        rank:
          $ref: '#/components/schemas/EmployeeRank'
          
    UpdateEmployeeRequest:
      type: object
      properties:
        departmentId:
          $ref: '#/components/schemas/UUID'
        position:
          type: string
        salary:
          type: number
          format: float
        status:
          $ref: '#/components/schemas/EmployeeStatus'
        rank:
          $ref: '#/components/schemas/EmployeeRank'
          
    EmployeeResponse:
      type: object
      required:
        - id
        - userId
        - departmentId
        - position
        - status
        - rank
        - hireDate
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        userId:
          $ref: '#/components/schemas/UUID'
        user:
          $ref: '#/components/schemas/UserResponse'
        departmentId:
          $ref: '#/components/schemas/UUID'
        department:
          $ref: '#/components/schemas/DepartmentResponse'
        position:
          type: string
        employeeNumber:
          type: string
        salary:
          type: number
          format: float
        status:
          $ref: '#/components/schemas/EmployeeStatus'
        rank:
          $ref: '#/components/schemas/EmployeeRank'
        hireDate:
          $ref: '#/components/schemas/ISODate'
        terminationDate:
          $ref: '#/components/schemas/ISODate'
        emotionalTone:
          $ref: '#/components/schemas/EmotionalTone'
        mcBalance:
          type: number
          format: float
          example: 1500.50
        gmcBalance:
          type: number
          format: float
          example: 25.0
        createdAt:
          $ref: '#/components/schemas/ISODateTime'
        updatedAt:
          $ref: '#/components/schemas/ISODateTime'
          
    EmployeeAnalyticsResponse:
      type: object
      properties:
        employeeId:
          $ref: '#/components/schemas/UUID'
        kpiScore:
          type: number
          format: float
          minimum: 0
          maximum: 100
          example: 85.5
        tasksCompleted:
          type: integer
          example: 42
        averageTaskCompletionTime:
          type: number
          format: float
          description: –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –≤ —á–∞—Å–∞—Ö
          example: 4.5
        emotionalToneAverage:
          $ref: '#/components/schemas/EmotionalTone'
        burnoutRisk:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: –†–∏—Å–∫ –≤—ã–≥–æ—Ä–∞–Ω–∏—è (0-1)
          example: 0.3
        engagementIndex:
          type: number
          format: float
          minimum: 0
          maximum: 100
          example: 75.0
          
    EmployeeFilters:
      type: object
      properties:
        departmentId:
          $ref: '#/components/schemas/UUID'
        status:
          $ref: '#/components/schemas/EmployeeStatus'
        rank:
          $ref: '#/components/schemas/EmployeeRank'
        minEmotionalTone:
          type: number
          format: float
        maxEmotionalTone:
          type: number
          format: float
        search:
          type: string
          description: –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, email, –Ω–æ–º–µ—Ä—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
          
    # Department Schemas
    DepartmentResponse:
      type: object
      required:
        - id
        - name
        - code
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        name:
          type: string
          example: '–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç'
        code:
          type: string
          pattern: '^[A-Z]{2,5}$'
          example: 'COMM'
        description:
          type: string
        headId:
          $ref: '#/components/schemas/UUID'
          description: ID —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
        employeeCount:
          type: integer
          example: 15
        createdAt:
          $ref: '#/components/schemas/ISODateTime'
        updatedAt:
          $ref: '#/components/schemas/ISODateTime'
          
    DepartmentKPIResponse:
      type: object
      properties:
        departmentId:
          $ref: '#/components/schemas/UUID'
        period:
          type: string
          enum: [daily, weekly, monthly, quarterly, yearly]
        metrics:
          type: object
          properties:
            revenue:
              type: number
              format: float
            tasksCompleted:
              type: integer
            averageEmotionalTone:
              $ref: '#/components/schemas/EmotionalTone'
            employeeEngagement:
              type: number
              format: float
              
    MudaAnalysisResponse:
      type: object
      description: –ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–µ—Ä—å (8 —Ç–∏–ø–æ–≤ Muda)
      properties:
        departmentId:
          $ref: '#/components/schemas/UUID'
        period:
          $ref: '#/components/schemas/ISODate'
        mudaTypes:
          type: object
          properties:
            overproduction:
              type: number
              description: –ü–µ—Ä–µ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ
            waiting:
              type: number
              description: –û–∂–∏–¥–∞–Ω–∏–µ
            transportation:
              type: number
              description: –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
            overprocessing:
              type: number
              description: –ò–∑–ª–∏—à–Ω—è—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
            inventory:
              type: number
              description: –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–ø–∞—Å—ã
            motion:
              type: number
              description: –õ–∏—à–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è
            defects:
              type: number
              description: –î–µ—Ñ–µ–∫—Ç—ã
            unutilizedTalent:
              type: number
              description: –ù–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–∞–ª–∞–Ω—Ç
        totalLoss:
          type: number
          format: float
          description: –û–±—â–∏–µ –ø–æ—Ç–µ—Ä–∏ –≤ —Ä—É–±–ª—è—Ö
          
    # Task Schemas
    CreateTaskRequest:
      type: object
      required:
        - title
        - description
      properties:
        title:
          type: string
          minLength: 3
          maxLength: 200
          example: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–Ω—Ç–µ—Ä—ã –Ω–∞ —Ñ–∏–ª–∏–∞–ª–µ –ú–∏—Ä–∞'
        description:
          type: string
          minLength: 10
          maxLength: 5000
          example: '–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –ø—Ä–∏–Ω—Ç–µ—Ä–æ–≤'
        assigneeId:
          $ref: '#/components/schemas/UUID'
        departmentId:
          $ref: '#/components/schemas/UUID'
        priority:
          $ref: '#/components/schemas/TaskPriority'
        dueDate:
          $ref: '#/components/schemas/ISODateTime'
        tags:
          type: array
          items:
            type: string
          example: ['—Ç–µ—Ö–Ω–∏–∫–∞', '—Ñ–∏–ª–∏–∞–ª-–º–∏—Ä–∞']
          
    NLPTaskRequest:
      type: object
      required:
        - text
      properties:
        text:
          type: string
          minLength: 10
          maxLength: 1000
          description: –¢–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏ –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ
          example: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–Ω—Ç–µ—Ä—ã –Ω–∞ –ú–∏—Ä–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 10:00'
          
    UpdateTaskRequest:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        assigneeId:
          $ref: '#/components/schemas/UUID'
        status:
          $ref: '#/components/schemas/TaskStatus'
        priority:
          $ref: '#/components/schemas/TaskPriority'
        dueDate:
          $ref: '#/components/schemas/ISODateTime'
          
    TaskResponse:
      type: object
      required:
        - id
        - title
        - description
        - status
        - priority
        - createdAt
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        title:
          type: string
        description:
          type: string
        status:
          $ref: '#/components/schemas/TaskStatus'
        priority:
          $ref: '#/components/schemas/TaskPriority'
        creatorId:
          $ref: '#/components/schemas/UUID'
        assigneeId:
          $ref: '#/components/schemas/UUID'
        departmentId:
          $ref: '#/components/schemas/UUID'
        dueDate:
          $ref: '#/components/schemas/ISODateTime'
        completedAt:
          $ref: '#/components/schemas/ISODateTime'
        tags:
          type: array
          items:
            type: string
        mcReward:
          type: number
          format: float
          description: –ù–∞–≥—Ä–∞–¥–∞ –≤ MC –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
          example: 50.0
        createdAt:
          $ref: '#/components/schemas/ISODateTime'
        updatedAt:
          $ref: '#/components/schemas/ISODateTime'
          
    AssignTaskRequest:
      type: object
      required:
        - assigneeId
      properties:
        assigneeId:
          $ref: '#/components/schemas/UUID'
          description: ID —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
          
    TaskCommentRequest:
      type: object
      required:
        - text
      properties:
        text:
          type: string
          minLength: 1
          maxLength: 2000
          
    TaskCommentResponse:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        taskId:
          $ref: '#/components/schemas/UUID'
        userId:
          $ref: '#/components/schemas/UUID'
        text:
          type: string
        createdAt:
          $ref: '#/components/schemas/ISODateTime'
          
    TaskFilters:
      type: object
      properties:
        status:
          $ref: '#/components/schemas/TaskStatus'
        assigneeId:
          $ref: '#/components/schemas/UUID'
        departmentId:
          $ref: '#/components/schemas/UUID'
        priority:
          $ref: '#/components/schemas/TaskPriority'
        dueDateFrom:
          $ref: '#/components/schemas/ISODateTime'
        dueDateTo:
          $ref: '#/components/schemas/ISODateTime'
        search:
          type: string
          
    # Economy Schemas
    WalletResponse:
      type: object
      required:
        - userId
        - mcBalance
        - gmcBalance
      properties:
        userId:
          $ref: '#/components/schemas/UUID'
        mcBalance:
          type: number
          format: float
          description: –ë–∞–ª–∞–Ω—Å MatrixCoin
          example: 1500.50
        gmcBalance:
          type: number
          format: float
          description: –ë–∞–ª–∞–Ω—Å Golden MatrixCoin
          example: 25.0
        mcFrozen:
          type: number
          format: float
          description: –ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ MC (–≤ —Å–µ–π—Ñ–µ)
          example: 500.0
        safeActivatedAt:
          $ref: '#/components/schemas/ISODateTime'
        safeExpiresAt:
          $ref: '#/components/schemas/ISODateTime'
        updatedAt:
          $ref: '#/components/schemas/ISODateTime'
          
    CreateTransactionRequest:
      type: object
      required:
        - type
        - currency
        - amount
      properties:
        type:
          $ref: '#/components/schemas/TransactionType'
        currency:
          $ref: '#/components/schemas/Currency'
        amount:
          type: number
          format: float
          minimum: 0.01
          example: 100.0
        recipientId:
          $ref: '#/components/schemas/UUID'
          description: ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è (–¥–ª—è transfer)
        description:
          type: string
          maxLength: 500
          example: '–ü–µ—Ä–µ–≤–æ–¥ –∑–∞ –ø–æ–º–æ—â—å —Å –∑–∞–¥–∞—á–µ–π'
          
    TransactionResponse:
      type: object
      required:
        - id
        - type
        - currency
        - amount
        - createdAt
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        type:
          $ref: '#/components/schemas/TransactionType'
        currency:
          $ref: '#/components/schemas/Currency'
        amount:
          type: number
          format: float
        senderId:
          $ref: '#/components/schemas/UUID'
        recipientId:
          $ref: '#/components/schemas/UUID'
        description:
          type: string
        metadata:
          type: object
          description: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
        createdAt:
          $ref: '#/components/schemas/ISODateTime'
          
    ActivateSafeRequest:
      type: object
      required:
        - amount
      properties:
        amount:
          type: number
          format: float
          minimum: 100
          description: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ MC –¥–ª—è –∑–∞–º–æ—Ä–æ–∑–∫–∏ (–º–∏–Ω–∏–º—É–º 100)
          example: 500.0
          
    AuctionResponse:
      type: object
      required:
        - id
        - title
        - startingBid
        - currentBid
        - status
        - startsAt
        - endsAt
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        title:
          type: string
          example: 'GMC –ê—É–∫—Ü–∏–æ–Ω #42'
        description:
          type: string
        startingBid:
          type: number
          format: float
          description: –ù–∞—á–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ –≤ MC
          example: 1000.0
        currentBid:
          type: number
          format: float
          description: –¢–µ–∫—É—â–∞—è —Å—Ç–∞–≤–∫–∞ –≤ MC
          example: 1500.0
        currentBidderId:
          $ref: '#/components/schemas/UUID'
        gmcAmount:
          type: number
          format: float
          description: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ GMC –Ω–∞ –ø—Ä–æ–¥–∞–∂—É
          example: 10.0
        status:
          type: string
          enum: [upcoming, active, ended]
        startsAt:
          $ref: '#/components/schemas/ISODateTime'
        endsAt:
          $ref: '#/components/schemas/ISODateTime'
        createdAt:
          $ref: '#/components/schemas/ISODateTime'
          
    PlaceBidRequest:
      type: object
      required:
        - amount
      properties:
        amount:
          type: number
          format: float
          minimum: 0.01
          description: –°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏ –≤ MC
          
    StoreItemResponse:
      type: object
      required:
        - id
        - name
        - price
        - currency
        - available
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        name:
          type: string
          example: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–µ–Ω—å –æ—Ç–ø—É—Å–∫–∞'
        description:
          type: string
        price:
          type: number
          format: float
          example: 500.0
        currency:
          $ref: '#/components/schemas/Currency'
        image:
          type: string
          format: uri
        available:
          type: boolean
        stock:
          type: integer
          description: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ
        rankDiscount:
          type: object
          description: –°–∫–∏–¥–∫–∏ –ø–æ —Ä–∞–Ω–≥–∞–º
          properties:
            –ò–Ω–≤–µ—Å—Ç–æ—Ä:
              type: number
              format: float
              example: 0.05
            –ú–∞–≥–Ω–∞—Ç:
              type: number
              format: float
              example: 0.10
              
    PurchaseItemRequest:
      type: object
      required:
        - itemId
        - quantity
      properties:
        itemId:
          $ref: '#/components/schemas/UUID'
        quantity:
          type: integer
          minimum: 1
          default: 1

paths:
  # Authentication Endpoints
  /auth/register:
    post:
      tags:
        - Authentication
      summary: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      description: |
        –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –ø—Ä–∏–Ω—è—Ç–∏–µ–º NDA.
        –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è:
        - –ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–§–æ—Ç–æ–Ω"
        - –ö–æ—à–µ–ª–µ–∫ (MC + GMC)
        - –ó–∞–ø–∏—Å—å –≤ audit log
      operationId: register
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AuthResponse'
        '400':
          description: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '409':
          description: Email —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
                
  /auth/login:
    post:
      tags:
        - Authentication
      summary: –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
      description: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–æ–≤
      operationId: login
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AuthResponse'
        '401':
          description: –ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
                
  /auth/refresh:
    post:
      tags:
        - Authentication
      summary: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access token
      description: –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ access token –∏—Å–ø–æ–ª—å–∑—É—è refresh token
      operationId: refreshToken
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: –¢–æ–∫–µ–Ω —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AuthResponse'
        '401':
          description: –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π refresh token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
                
  /auth/logout:
    post:
      tags:
        - Authentication
      summary: –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
      description: –û—Ç–∑—ã–≤ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      operationId: logout
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω—ã–π –≤—ã—Ö–æ–¥
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          message:
                            type: string
                            example: 'Successfully logged out'
                            
  /auth/forgot-password:
    post:
      tags:
        - Authentication
      summary: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
      description: –û—Ç–ø—Ä–∞–≤–∫–∞ email —Å —Å—Å—ã–ª–∫–æ–π –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è
      operationId: forgotPassword
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForgotPasswordRequest'
      responses:
        '200':
          description: Email –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          message:
                            type: string
                            example: 'Password reset email sent'
                            
  /auth/reset-password:
    post:
      tags:
        - Authentication
      summary: –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
      description: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ–∫–µ–Ω –∏–∑ email
      operationId: resetPassword
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequest'
      responses:
        '200':
          description: –ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          message:
                            type: string
                            example: 'Password successfully reset'
                            
  /auth/me:
    get:
      tags:
        - Authentication
      summary: –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      description: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
      operationId: getCurrentUser
      responses:
        '200':
          description: –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserResponse'
                        
  /auth/permissions:
    get:
      tags:
        - Authentication
      summary: –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
      description: –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      operationId: getPermissions
      responses:
        '200':
          description: –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/PermissionsResponse'
