# OFS Executive Snapshot Specification

**Status:** DRAFT
**Version:** 1.0
**Context:** Module 04 (OFS) - UI Contracts & Visualization Rules

## 1. Overview
The **Executive Snapshot** is the highest-level view of the MatrixGin system. It abstracts complex graph analysis into four canonical signal indicators. It is **NOT** a dashboard; it is a **System State Monitor**.

## 2. Executive Snapshot DTO

This DTO is generated by the **OFS Aggregation Service** specifically for the Frontend. It masks the complexity of the underlying `SignalSnapshotDTO`.

```typescript
export interface ExecutiveSnapshotDTO {
  meta: {
    timestamp: string; // ISO 8601
    mode: 'LIVE' | 'SCENARIO';
    data_quality: 'COMPLETE' | 'INSUFFICIENT';
  };

  indicators: {
    structural_stability: SignalBlock;
    functional_coverage: SignalBlock;
    cpk_alignment: SignalBlock;
    intellectual_support: SignalBlock;
  };
}

export interface SignalBlock {
  level: 'GREEN' | 'YELLOW' | 'RED' | 'GRAY'; // GRAY = Insufficient Data
  summary: string;
  delta?: 'IMPROVED' | 'WORSENED' | 'UNCHANGED'; // Only in SCENARIO mode
}
```

## 3. Signal Mapping Rules

### 3.1. Structural Stability
*   **GREEN:** Complete connectivity. No ghost units. Hierarchy depth within limits.
*   **YELLOW:** Minor fragmentation (1-2 isolated units). Depth anomalies detected but connectivity exists.
*   **RED:** Major fragmentation (>2 isolated units/sub-trees). Critical structural breaks.

### 3.2. Functional Coverage
*   **GREEN:** All non-abstract units have functions. All functions attached to units.
*   **YELLOW:** Some units are "Hollow" (no functions defined yet).
*   **RED:** Orphan functions detected (functions without owners).

### 3.3. CPK Alignment (Value)
*   **GREEN:** All functions produce CPK. All CPKs have assigned Owners.
*   **YELLOW:** Functions produce CPK, but ownership is ambiguous or shared.
*   **RED:** "Busy Work" detected (Functions with NO defined CPK). CPKs without defined Owners.

### 3.4. Intellectual Support
*   **GREEN:** High coverage of methodologies and qualifications.
*   **YELLOW:** Key functions lack specific methodologies.
*   **RED:** Critical positions lack qualification requirements (Competence Blindspots).

## 4. Semantic Summary Generation
The `summary` field must use neutral, systemic language.

- **Bad:** "3 departments are failing." (Emotional/Judgmental)
- **Good:** "Structural fragmentation detected in 3 sectors." (Systemic)
- **Good:** "Functional coverage is complete." (Systemic)

**Template Examples:**
- *Green:* "System structure is coherent and fully connected."
- *Yellow:* "Tension detected: Unassigned functions in Sales Division."
- *Red:* "Critical gap: Core functions lack defined outputs (CPK)."

## 5. Visualization Rules

### 5.1. The Traffic Light Principle
- The UI MUST use the canonical colors (`#2ECC71`, `#F1C40F`, `#E74C3C`).
- No gradients or "scores" (e.g., 85%).
- The state is discrete.

### 5.2. Scenario Mode Rendering
When `mode == 'SCENARIO'`, the UI must overlay the **Delta**.

- **Improved (Red → Yellow):** Show Red baseline, animate to Yellow. Arrow UP.
- **Worsened (Green → Yellow):** Show Green baseline, animate to Yellow. Arrow DOWN.
- **Banner:** Persistent "SCENARIO PREVIEW" banner to prevent confusion with Live state.

### 5.3. Prohibitions (Strict)
1.  **NO Tables:** Do not list the 15 units that are isolated. (User clicks "Investigate" to see graph).
2.  **NO KPI Charts:** No "Productivity %" or "Efficiency".
3.  **NO Personas:** Do not show names of managers responsible for gaps. Focus on the *Position*.
4.  **NO Excel Exports:** This is a live monitor, not a report generator.

## 6. Fail-Safe UI
If `data_quality == 'INSUFFICIENT'`:
- All indicators turn **GRAY**.
- Summary: "Registry data unavailable or incomplete. Check connection."
- User actions blocked strictly.
